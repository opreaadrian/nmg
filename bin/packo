#!/usr/bin/env node

'use strict';

var fs        = require('fs'),
    constants = require('../lib/constants'),
    helpFileContents = fs.readFileSync(__dirname + '/../lib/example.txt', 'UTF-8'),
    pkg = require('../package.json'),
    CLI = require('../lib/cli'),
    program = require('commander');

program.version(pkg.version)
    .option('-b, --bin', 'Add bin/ folder and executable file for module.')
    .usage('[cmd] options');


program.on('--help', function() {
    process.stdout.write(helpFileContents);
});

program.command('create [package]')
    .description('Create a package named [package]. Current directory name is used by default.')
    .action(function(packageName, options) {
        CLI.createPackage(packageName, options);
    });

program.command('module [name]')
    .description('Create the "lib/[name].js" module. Also creates "test/[name]_spec.js" for the module.')
    .action(function(moduleName) {
        CLI.createModule(moduleName);
    });

program
    .parse(process.argv);

if (process.argv.length == 2) {
    program.outputHelp();
    process.exit(constants.ERROR_EXIT);
}
